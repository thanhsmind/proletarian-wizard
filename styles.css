/* --- Biáº¿n mÃ u Ä‘Æ°á»£c tinh chá»‰nh Ä‘á»ƒ rÃµ rÃ ng hÆ¡n --- */
:root {
  --background-color: #1a1a1a; /* Ná»n tá»‘i hÆ¡n má»™t chÃºt */
  --item-hover-background-color: #2c2c2c;
  --primary-text-color: #f0f0f0; /* MÃ u chá»¯ chÃ­nh, sÃ¡ng vÃ  rÃµ hÆ¡n */
  --secondary-text-color: #a0a0a0; /* MÃ u chá»¯ phá»¥, thÃ´ng tin meta */
  --completed-text-color: #888888; /* MÃ u chá»¯ khi Ä‘Ã£ hoÃ n thÃ nh */
  --checkbox-border-color: #8e8e93;
  --checkbox-checked-color: #5e97f6; /* MÃ u xanh dÆ°Æ¡ng cho checkbox */
  --date-overdue-color: #ff8a80; /* MÃ u Ä‘á» cho ngÃ y quÃ¡ háº¡n */
  --separator-color: #333333; /* MÃ u Ä‘Æ°á»ng káº» phÃ¢n cÃ¡ch */
}

body {
  background-color: var(--background-color);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  color: var(--primary-text-color);
}

/* --- Container chÃ­nh cá»§a má»—i má»¥c To-do --- */
.pw-todo-container {
  display: flex;
  align-items: center; /* Äá»•i thÃ nh 'center' Ä‘á»ƒ checkbox, text, icon tháº³ng hÃ ng Ä‘áº¹p hÆ¡n */
  gap: 8px; /* DÃ¹ng 'gap' Ä‘á»ƒ táº¡o khoáº£ng cÃ¡ch Ä‘á»u giá»¯a cÃ¡c item, thay cho margin riÃªng láº» */
  width: 100%;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
  border-bottom: 1px solid var(--separator-color); /* ÄÆ°á»ng káº» phÃ¢n cÃ¡ch */
}
.pw-todo-container:has(> .pw-todo-sub-container) {
  flex-wrap: wrap;
  align-items: flex-start;
}
.pw-todo-container:hover {
  background-color: var(--item-hover-background-color);
}
.pw-planning-column-content > div > .pw-todo-container {
  margin-bottom: 16px; /* Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh giÃ¡ trá»‹ nÃ y Ä‘á»ƒ cÃ³ khoáº£ng cÃ¡ch mong muá»‘n */
}

/* === TRáº NG THÃI KHI HOÃ€N THÃ€NH (Sá»­ dá»¥ng class .checked) === */
/* === TRáº NG THÃI HOÃ€N THÃ€NH Vá»šI ICON ğŸŸ¢ Má»šI === */

/* 1. Khi checkbox Ä‘Æ°á»£c check, áº©n ná»™i dung gá»‘c vÃ  bá» mÃ u ná»n/viá»n */
.pw-todo-checkbox.checked {
  font-size: 0; /* áº¨n icon/text gá»‘c bÃªn trong */
  background-color: transparent; /* Bá» mÃ u ná»n xanh dÆ°Æ¡ng */
  border-color: transparent; /* Bá» viá»n xanh dÆ°Æ¡ng */
  /* Giá»¯ láº¡i thuá»™c tÃ­nh display flex Ä‘á»ƒ cÄƒn giá»¯a icon má»›i */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 2. Bá» Ä‘i dáº¥u tick cÅ© Ä‘Æ°á»£c váº½ báº±ng CSS */
.pw-todo-checkbox.checked::after {
  content: none; /* XÃ³a bá» dáº¥u tick cÅ© */
}

/* 3. ThÃªm icon ğŸŸ¢ má»›i báº±ng pseudo-element ::before */
.pw-todo-checkbox.checked::before {
  content: "ğŸŸ¢";
  font-size: 16px; /* Äáº·t láº¡i kÃ­ch thÆ°á»›c font Ä‘á»ƒ icon hiá»ƒn thá»‹. Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c nÃ y. */
  line-height: 1; /* Äáº£m báº£o icon Ä‘Æ°á»£c cÄƒn giá»¯a tá»‘t hÆ¡n */
}

/* 4. Äá»«ng quÃªn style cho pháº§n text bá»‹ gáº¡ch ngang */
.pw-todo-checkbox.checked + .pw-todo-text {
  color: var(--completed-text-color);
  text-decoration: line-through;
}

/* (TÃ¹y chá»n) Style cho meta náº¿u cÃ³ */
.pw-todo-checkbox.checked ~ .pw-todo-meta {
  text-decoration: line-through;
}
/* --- Checkbox --- */
.pw-todo-checkbox {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  border: 2px solid var(--checkbox-border-color);
  border-radius: 50%;
  font-size: 0;
  transition: all 0.2s;
  position: relative;
  top: 0px;
}

/* --- Ná»™i dung (Text + Meta) --- */
.pw-todo-content {
  flex-grow: 1; /* Äá»ƒ ná»™i dung chiáº¿m háº¿t khÃ´ng gian cÃ²n láº¡i */
}

.pw-todo-text {
  flex: 1 1 0; /* TÆ°Æ¡ng Ä‘Æ°Æ¡ng: flex-grow: 1, flex-shrink: 1, flex-basis: 0 */
  min-width: 0; /* << Ráº¤T QUAN TRá»ŒNG: Cho phÃ©p flex item co láº¡i nhá» hÆ¡n cáº£ ná»™i dung cá»§a nÃ³ */
  transition: color 0.2s ease-in-out;
}

/* --- ThÃ´ng tin phá»¥ (ngÃ y thÃ¡ng,...) --- */
.pw-todo-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--secondary-text-color);
}

.pw-todo-meta .overdue {
  color: var(--date-overdue-color);
}

/* --- Khu vá»±c hÃ nh Ä‘á»™ng bÃªn pháº£i --- */
.pw-todo-actions {
  font-size: 13px;
  color: var(--secondary-text-color);
}

/* === TRáº NG THÃI KHI HOÃ€N THÃ€NH === */
.pw-todo-container.completed .pw-todo-text {
  color: var(--completed-text-color);
  text-decoration: line-through;
}

.pw-todo-container.completed .pw-todo-meta {
  text-decoration: line-through;
}

.pw-todo-container.completed .pw-todo-checkbox {
  background-color: var(--checkbox-checked-color);
  border-color: var(--checkbox-checked-color);
}

.pw-todo-container.completed .pw-todo-checkbox::after {
  content: "";
  display: block;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Target vÃ o class cá»§a báº¡n */
.pw-planning-column--today .pw-planning-column-title-icon {
  /* áº¨n kÃ½ tá»± gá»‘c bÃªn trong tháº» span báº±ng cÃ¡ch cho font-size báº±ng 0 */
  font-size: 0;
}

/* Táº¡o má»™t element giáº£ ngay trÆ°á»›c ná»™i dung gá»‘c (Ä‘Ã£ bá»‹ áº©n) */
.pw-planning-today
  .pw-planning-column--today:nth-of-type(1)
  .pw-planning-column-title-icon::before {
  /* ThÃªm icon má»›i cá»§a báº¡n vÃ o Ä‘Ã¢y */
  content: "ğŸ”´";

  /* Äáº·t láº¡i kÃ­ch thÆ°á»›c font cho icon má»›i Ä‘á»ƒ nÃ³ hiá»ƒn thá»‹ */
  font-size: 16px; /* <-- Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c á»Ÿ Ä‘Ã¢y */
}
.pw-planning-today
  .pw-planning-column--today:nth-of-type(2)
  .pw-planning-column-title-icon::before {
  /* ThÃªm icon má»›i cá»§a báº¡n vÃ o Ä‘Ã¢y */
  content: "ğŸŸ¡";

  /* Äáº·t láº¡i kÃ­ch thÆ°á»›c font cho icon má»›i Ä‘á»ƒ nÃ³ hiá»ƒn thá»‹ */
  font-size: 16px; /* <-- Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c á»Ÿ Ä‘Ã¢y */
}
.pw-planning-today
  .pw-planning-column--today:nth-of-type(3)
  .pw-planning-column-title-icon::before {
  /* ThÃªm icon má»›i cá»§a báº¡n vÃ o Ä‘Ã¢y */
  content: "ğŸŸ¢";

  /* Äáº·t láº¡i kÃ­ch thÆ°á»›c font cho icon má»›i Ä‘á»ƒ nÃ³ hiá»ƒn thá»‹ */
  font-size: 16px; /* <-- Báº¡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c á»Ÿ Ä‘Ã¢y */
}

.HyperMD-task-line {
  color: var(--color-purple);
}

.pw-todo-text-complete {
  text-decoration: line-through;
  display: inline-block;
}

.pw-todo-checkbox {
  /* height: 100%; */
  display: inline-block;
  width: 20px;
}

.pw-todo-text {
  display: inline;
}

.pw-todo-panel {
  font-size: small;
}

.pw-todo-duration {
  font-style: italic;
  color: var(--text-muted);
}

.pw-todo-container {
  cursor: pointer;
  /* display: inline; */
  flex-direction: row;
  transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

.pw-todo-container:hover {
  border-color: transparent;
  background-color: transparent;
}
.todo-sub {
  flex-shrink: 0;
}
.pw-todo-sub-container {
  flex-basis: 100%;
  margin-top: 8px;
  margin-left: 8px;
  padding-left: 15px;
  border-left: 1px solid var(--separator-color, #333333);
}

.pw-planning-subsection-title {
  font-weight: bold;
  padding: 2px 0;
  margin-bottom: 5px;
  color: var(--text-accent);
  border-bottom: 1px solid var(--background-modifier-border);
}

.pw-planning-subsection-divider {
  border-top: 1px dashed var(--background-modifier-border);
  margin: 10px 0;
}

.pw-planning--settings {
  display: block;
}

.ub-color_474d66 {
  color: var(--text-normal) !important;
}

.pw-planning--settings--search {
  display: inline-block;
  margin-left: 20px;
}

.pw-planning--settings--wip {
  display: inline-block;
  margin-left: 20px;
}

.pw-planning--settings--hide-checkbox {
  display: inline-block;
}

.pw-planning-column {
  width: 260px;
  margin: 5px;
  display: inline-block;
  height: 260px;
}

.pw-planning-column-title {
  width: 100%;
  margin-bottom: 15px;
  font-weight: bold;
  text-align: center;
}

.pw-planning-column-title-icon {
  margin-right: 10px;
}

.pw-planning-column-content {
  padding: 8px;
  font-size: 0.8em;
  border: 1px solid var(--background-modifier-border);
  height: 100%;
  overflow: auto;
  border-radius: 10px;
}

/* TODAY */

.pw-planning-today {
  border: 3px solid var(--background-modifier-border);
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 30px;
}

.pw-planning-today h1 {
  text-align: center;
  padding-bottom: 15px;
}

.pw-planning-today-icon {
  color: #fc0;
}

.pw-planning-column--today {
  width: 30%;
}

.pw-planning-column--today:nth-of-type(1) {
  border-right: 1px solid var(--background-modifier-border);
}

.pw-planning-column--today:nth-of-type(3) {
  border-left: 1px solid var(--background-modifier-border);
}

.pw-planning-column-content--today {
  border: 1px solid transparent;
}

.pw-planning-column-content--hover {
  border-color: var(--background-modifier-border-hover);
  background-color: var(--background-modifier-hover);
}

.pw-planning-column-content--wip-exceeded {
  border: 1px solid var(--text-error);
}

.pw-report {
  overflow: auto;
  padding: 10px;
}

.pw-report-container {
  padding: 30px;
  margin: 10px;
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-m);
  min-height: 80px;
}

.pw-error {
  color: var(--background-modifier-error);
}

.pw-tag-pill {
  background-color: var(--background-modifier-hover);
  color: var(--text-muted);
  padding: 2px 5px;
  border-radius: 10px;
  margin-right: 5px;
}

/* Date Time Progress Bar Styles */
.pw-date-time-header {
  position: relative;
  overflow: hidden;
  border-radius: 4px;
  margin-bottom: 10px;
  text-align: center;
}

.pw-progress-container {
  margin: auto;
  width: 400px;
  height: 10px;
  background-color: var(--background-secondary);
  border: 1pt solid var(--interactive-accent);
  z-index: 0;
}

.pw-progress-bar {
  height: 100%;
  background-color: var(--interactive-accent);
  opacity: 0.5;
  transition: width 0.5s ease;
  z-index: 1;
}

.pw-current-date-time {
  color: var(--text-normal);
  font-size: 1.2em;
  position: relative;
  z-index: 2;
  margin: 10px auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

.pw-current-date-time-icon {
  margin-right: 8px;
}

/* Fixed width for time to prevent shifting */
.pw-time-dynamic {
  display: inline-block;
  min-width: 110px;
  text-align: left;
}

.pw-time-separator {
  display: inline-block;
  width: 15px;
  text-align: center;
}

.pw-today-hours-container {
  margin-top: 20px;
  padding: 10px;
  border-top: 1px solid var(--background-modifier-border);
}

.pw-today-hours-input {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pw-today-hours-reset {
  margin-left: auto;
}

/* Ignored Folders Settings UI */
.pw-ignored-folders-section {
  margin-bottom: 20px;
}

.pw-ignored-folders-list {
  margin-top: 10px;
  margin-left: 40px;
}

.pw-no-ignored-folders {
  color: var(--text-muted);
  font-style: italic;
  margin-top: 5px;
}

.pw-ignored-folders-items {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.pw-ignored-folder-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px 10px;
  margin-bottom: 5px;
  background-color: var(--background-secondary);
  border-radius: 4px;
}

.pw-ignored-folder-name {
  flex-grow: 1;
  margin-right: 10px;
}

/* Folder Selection Modal */
.pw-folder-selection-list {
  max-height: 300px;
  overflow-y: auto;
  margin-top: 15px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
}

.pw-folder-search-container {
  margin-bottom: 10px;
}

.pw-folder-search-input {
  width: 100%;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid var(--background-modifier-border);
}

.pw-folder-list {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.pw-folder-list-item {
  padding: 2px 0;
}

.pw-folder-select-button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 0;
  color: var(--text-normal);
  cursor: pointer;
}

.pw-folder-select-button:hover {
  background-color: var(--background-modifier-hover);
}

/* Report Header and Export Button Styles */
.pw-report-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.pw-report-actions {
  margin: 15px 0;
  text-align: right;
}

.pw-report-export-button {
  background-color: var(--interactive-accent);
  color: var(--text-on-accent);
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
  border: none;
}

.pw-report-export-button:hover {
  background-color: var(--interactive-accent-hover);
}

/* Export Modal Styling */
.pw-tag-selection {
  max-height: 200px;
  overflow-y: auto;
  margin: 10px 0;
  padding: 5px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
}

.pw-tag-selection .setting-item {
  padding: 6px;
  border-top: none;
}

.pw-tag-selection .setting-item:hover {
  background-color: var(--background-modifier-hover);
}

.pw-export-modal h2 {
  margin-bottom: 20px;
  text-align: center;
  color: var(--text-accent);
}

.pw-export-modal h3 {
  margin: 10px 0;
  color: var(--text-normal);
  font-size: 1rem;
  border-bottom: 1px solid var(--background-modifier-border);
  padding-bottom: 5px;
}

/* Clickable column titles */
.pw-planning-column-title--clickable {
  cursor: pointer;
  transition: background-color 0.2s ease;
  padding: 4px 8px;
  border-radius: 4px;
}

.pw-planning-column-title--clickable:hover {
  background-color: var(--background-modifier-hover);
}

/* Clickable Today title */
.pw-planning-today-title--clickable {
  cursor: pointer;
  transition: background-color 0.2s ease;
  padding: 4px 8px;
  border-radius: 4px;
  margin: 0;
}

.pw-planning-today-title--clickable:hover {
  background-color: var(--background-modifier-hover);
}

/* Date selection modal */
.pw-date-selection-container {
  display: flex;
  flex-direction: column;
  gap: 5px;
  max-height: 300px;
  overflow-y: auto;
  margin: 15px 0;
}

.pw-date-selection-button {
  width: 100%;
  text-align: left;
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  color: var(--text-normal);
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.pw-date-selection-button:hover {
  background-color: var(--background-modifier-hover);
}

.pw-date-selected {
  background-color: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}

/* --- Tá»‘i Æ°u hÃ³a giao diá»‡n Mobile cho khu vá»±c Today --- */
@media screen and (max-width: 768px) {
  .pw-planning-column-title {
    text-align: left;
    padding-left: 10px; /* ThÃªm má»™t chÃºt Ä‘á»‡m Ä‘á»ƒ khÃ´ng bá»‹ dÃ­nh sÃ¡t lá» */
  }
  /* 1. Biáº¿n container chÃ­nh thÃ nh flexbox dá»c Ä‘á»ƒ cÃ¡c cá»™t xáº¿p chá»“ng lÃªn nhau */
  .pw-planning-today {
    display: flex;
    flex-direction: column;
    gap: 20px; /* ThÃªm khoáº£ng cÃ¡ch giá»¯a cÃ¡c cá»™t khi xáº¿p chá»“ng */
    border: none; /* Bá» border bÃªn ngoÃ i cho gá»n hÆ¡n trÃªn mobile */
    padding: 5px;
  }

  /* --- A. STYLE CHO MÃ€N HÃŒNH Lá»šN (DESKTOP) --- */
  /* CÃ¡c cá»™t Backlog, Past... sáº½ hiá»ƒn thá»‹ ngang nhau */
  .pw-planning-nextaction .pw-planning-column {
    display: inline-block;
    width: 260px; /* Chiá»u rá»™ng cá»‘ Ä‘á»‹nh trÃªn desktop */
    height: 260px; /* Chiá»u cao cá»‘ Ä‘á»‹nh */
    margin: 10px;
    vertical-align: top;
  }

  /* Style cho container .pw-planning-nextaction trÃªn desktop */
  .pw-planning-nextaction {
    margin-top: 30px;
    text-align: center; /* CÄƒn giá»¯a cÃ¡c cá»™t inline-block */
  }

  /* --- B. STYLE GHI ÄÃˆ CHO MÃ€N HÃŒNH NHá» (MOBILE) --- */
  @media screen and (max-width: 768px) {
    /* ... (giá»¯ láº¡i táº¥t cáº£ cÃ¡c style mobile cÅ© cá»§a báº¡n cho khu vá»±c Today) ... */

    .pw-planning-today {
      display: flex;
      flex-direction: column;
      gap: 20px;
      border: none;
      padding: 5px;
    }

    .pw-planning-column--today {
      width: 100%;
      margin: 0;
      height: auto;
      border: 1px solid var(--separator-color);
      border-radius: 8px;
      padding-bottom: 10px;
    }

    .pw-planning-column-title {
      text-align: left;
      padding-left: 10px;
    }

    /* === PHáº¦N Má»šI THÃŠM VÃ€O === */
    /* CÃ¡c cá»™t Backlog, Past... sáº½ xáº¿p chá»“ng vÃ  chiáº¿m toÃ n bá»™ chiá»u rá»™ng */
    .pw-planning-nextaction .pw-planning-column {
      display: block;
      width: 100%; /* Chiáº¿m toÃ n bá»™ chiá»u rá»™ng trÃªn mobile */
      height: auto; /* Chiá»u cao tá»± Ä‘á»™ng theo ná»™i dung */
      min-height: 100px; /* Chiá»u cao tá»‘i thiá»ƒu Ä‘á»ƒ khÃ´ng bá»‹ xáº¹p */
      margin: 0 0 20px 0; /* Chá»‰ giá»¯ láº¡i margin dÆ°á»›i Ä‘á»ƒ táº¡o khoáº£ng cÃ¡ch */
    }

    /* CÄƒn lá» láº¡i cho container trÃªn mobile */
    .pw-planning-nextaction {
      text-align: left;
      margin-top: 20px;
    }
  }

  /* 2. Thiáº¿t láº­p láº¡i cÃ¡c cá»™t Ä‘á»ƒ hiá»ƒn thá»‹ dáº¡ng list item */
  .pw-planning-column--today {
    width: 100%; /* Chiáº¿m toÃ n bá»™ chiá»u rá»™ng */
    margin: 0; /* XÃ³a margin cÅ© */
    height: auto; /* Äá»ƒ chiá»u cao tá»± Ä‘á»™ng theo ná»™i dung */
    border: 1px solid var(--separator-color); /* ThÃªm border cho má»—i má»¥c */
    border-radius: 8px; /* Bo gÃ³c cho Ä‘áº¹p */
  }

  /* 3. Sáº¯p xáº¿p láº¡i thá»© tá»± cÃ¡c cá»™t báº±ng thuá»™c tÃ­nh `order` cá»§a flexbox */

  /* Cá»™t "In progress" (cá»™t thá»© 2 trong HTML) lÃªn Ä‘áº§u tiÃªn */
  .pw-planning-today .pw-planning-column--today:nth-of-type(2) {
    order: 1;
  }

  /* Cá»™t "Todo" (cá»™t thá»© 1 trong HTML) xuá»‘ng thá»© hai */
  .pw-planning-today .pw-planning-column--today:nth-of-type(1) {
    order: 2;
  }

  /* Cá»™t "Done" (cá»™t thá»© 3 trong HTML) á»Ÿ cuá»‘i cÃ¹ng */
  .pw-planning-today .pw-planning-column--today:nth-of-type(3) {
    order: 3;
  }

  /* 4. XÃ³a bá» cÃ¡c Ä‘Æ°á»ng viá»n ngÄƒn cÃ¡ch dá»c khÃ´ng cáº§n thiáº¿t ná»¯a */
  .pw-planning-column--today:nth-of-type(1),
  .pw-planning-column--today:nth-of-type(3) {
    border-right: none;
    border-left: none;
  }
}
